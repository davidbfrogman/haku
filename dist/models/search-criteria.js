"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class SearchCriteria {
    constructor(request, next) {
        this.limit = parseInt(request.query.limit, 10) || 25;
        this.skip = parseInt(request.query.skip, 10) || 0;
        this.criteria = request.query.criteria || request.query.criteria || request.query.selection || null;
        try {
            if (this.criteria) {
                this.criteria = JSON.parse(this.criteria);
            }
        }
        catch (err) {
            next(err);
        }
        this.sort = request.query.sort || request.query.sortBy || request.query.sortby || null;
        try {
            if (this.sort) {
                this.sort = JSON.parse(this.sort);
            }
        }
        catch (err) {
            next(err);
        }
    }
}
exports.SearchCriteria = SearchCriteria;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZlYnJvd24vRG9jdW1lbnRzL2hha3Uvc2VydmVyL21vZGVscy9zZWFyY2gtY3JpdGVyaWEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQTtJQU1JLFlBQVksT0FBZ0IsRUFBRSxJQUFrQjtRQUM1QyxJQUFJLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDckQsSUFBSSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxTQUFTLElBQUksSUFBSSxDQUFDO1FBRXBHLElBQUksQ0FBQztZQUNELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO2dCQUNoQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzlDLENBQUM7UUFDTCxDQUFDO1FBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUNYLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNkLENBQUM7UUFFRCxJQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQztRQUV2RixJQUFJLENBQUM7WUFDRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDWixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3RDLENBQUM7UUFDTCxDQUFDO1FBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUNYLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNkLENBQUM7SUFDTCxDQUFDO0NBQ0o7QUE3QkQsd0NBNkJDIiwiZmlsZSI6Im1vZGVscy9zZWFyY2gtY3JpdGVyaWEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIsIFJlcXVlc3QsIFJlc3BvbnNlLCBSZXF1ZXN0UGFyYW1IYW5kbGVyLCBOZXh0RnVuY3Rpb24sIFJlcXVlc3RIYW5kbGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5cbmV4cG9ydCBjbGFzcyBTZWFyY2hDcml0ZXJpYSB7XG4gICAgcHVibGljIGxpbWl0OiBudW1iZXI7XG4gICAgcHVibGljIHNraXA6IG51bWJlcjtcbiAgICBwdWJsaWMgY3JpdGVyaWE6IHN0cmluZztcbiAgICBwdWJsaWMgc29ydDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IocmVxdWVzdDogUmVxdWVzdCwgbmV4dDogTmV4dEZ1bmN0aW9uKSB7XG4gICAgICAgIHRoaXMubGltaXQgPSBwYXJzZUludChyZXF1ZXN0LnF1ZXJ5LmxpbWl0LCAxMCkgfHwgMjU7XG4gICAgICAgIHRoaXMuc2tpcCA9IHBhcnNlSW50KHJlcXVlc3QucXVlcnkuc2tpcCwgMTApIHx8IDA7XG4gICAgICAgIHRoaXMuY3JpdGVyaWEgPSByZXF1ZXN0LnF1ZXJ5LmNyaXRlcmlhIHx8IHJlcXVlc3QucXVlcnkuY3JpdGVyaWEgfHwgcmVxdWVzdC5xdWVyeS5zZWxlY3Rpb24gfHwgbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3JpdGVyaWEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyaXRlcmlhID0gSlNPTi5wYXJzZSh0aGlzLmNyaXRlcmlhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBuZXh0KGVycik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNvcnQgPSByZXF1ZXN0LnF1ZXJ5LnNvcnQgfHwgcmVxdWVzdC5xdWVyeS5zb3J0QnkgfHwgcmVxdWVzdC5xdWVyeS5zb3J0YnkgfHwgbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc29ydCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc29ydCA9IEpTT04ucGFyc2UodGhpcy5zb3J0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBuZXh0KGVycik7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=
